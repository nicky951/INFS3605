{% load static %}
<script>
  function checkFunction() {
    var email = document.getElementById('i25v').value;
    //get response via CORS proxy
    var jsonRequest = "https://cors-anywhere.herokuapp.com/https://haveibeenpwned.com/api/v3/breachedaccount/" + email + "?truncateResponse=false";

    var request = new XMLHttpRequest();

    request.open('GET', jsonRequest);
    request.setRequestHeader("hibp-api-key", "38eb580ec92d4403becca47370ac9d1f");
    request.setRequestHeader("Access-Control-Allow-Origin", "*");
    request.send();
    var response = request.responseJson;
    console.log(response);
    document.getElementById('label').innerHTML = jsonRequest; 
    document.getElementById('breachtable').style.visibility = 'visible';
  }
</script>

<link rel="stylesheet" type="text/css" href= "{% static 'css/pwned.css' %}">
<div id="check_title">Check your Email
</div>
<form class="form">
  <div class="form-group">
  </div>
  <div class="form-group">
    <label class="label" id="ipcx">Email</label>
    <input type="email" placeholder="Type here your email" class="input" id="i25v"/>
  </div>
  <div class="form-group">
  </div>
  <div class="form-group">
    <button type="button" class="button" id="check" onclick="checkFunction()">Check</button>

  </div>
</form>
<label id="label"> test123</label>
<table class="table" id="breachtable" style="visibility: hidden;">
  <thead>
      <tr>
          <th>Breach</th>
          <th>Logo</th>
          <th>Date</th>
          <th>Details</th>
      </tr>
  </thead>
  <tbody>
    {% for breach in cleansedbreach %}
    <tr>
      <td>{{breach.Name}}</td>
      <td style="background-color:black"> <img src="{{breach.LogoPath}}" style="width: 100px; height: auto;"></img></td>
      <td>{{breach.BreachDate}}</td>
      <td>{{breach.Description}}</td>
    </tr>
    {% endfor %} 	  
  </tbody>
</table>